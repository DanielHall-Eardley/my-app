(()=>{var Mn=Object.create;var we=Object.defineProperty;var Ln=Object.getOwnPropertyDescriptor;var Fn=Object.getOwnPropertyNames;var Hn=Object.getPrototypeOf,Gn=Object.prototype.hasOwnProperty;var Et=r=>we(r,"__esModule",{value:!0});var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Jn=(r,e)=>{Et(r);for(var t in e)we(r,t,{get:e[t],enumerable:!0})},qn=(r,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fn(e))!Gn.call(r,n)&&n!=="default"&&we(r,n,{get:()=>e[n],enumerable:!(t=Ln(e,n))||t.enumerable});return r},R=r=>qn(Et(we(r!=null?Mn(Hn(r)):{},"default",r&&r.__esModule&&"default"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var Ot=_((io,jt)=>{jt.exports=[{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"ahaMomentTitle"},content:"Enter a title"},{name:"input",attributes:{id:"ahaMomentTitle",name:"title",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"ahaMomentContent"},content:"Share your breakthru"},{name:"textarea",attributes:{id:"ahaMomentContent",name:"content"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"ahaomentDate"},content:"Enter the date"},{name:"input",attributes:{id:"ahaMomentDate",name:"date",type:"date"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"ahaMomentRating"},content:"How much did this affect your coding?"},{name:"input",attributes:{id:"ahaMomentRating",name:"mind_blown_rating",type:"number"}}]},{name:"button",content:"Submit"}]});var At=_((so,kt)=>{kt.exports=[{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"dadHackTitle"},content:"Enter a title"},{name:"input",attributes:{id:"dadHackTitle",name:"title",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"dadHackContent"},content:"Share your dad hack"},{name:"textarea",attributes:{id:"dadHackContent",name:"content"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"dadHackDate"},content:"Enter the date"},{name:"input",attributes:{id:"dadHackDate",name:"date",type:"date"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"dadHackCategory"},content:"Enter a category"},{name:"input",attributes:{id:"dadHackCategory",name:"category",type:"text"}}]},{name:"button",content:"Submit"}]});var $t=_(Ct=>{function zn(r,e){if(!e)return r;let t=Object.keys(e);return t.length>0&&t.forEach(n=>{let i=e[n];r.setAttribute(n,i)}),r}function Wn(r,e){if(e){let t=document.createTextNode(e);r.appendChild(t)}return r}Ct.createHTMLComponent=function(r){let e=new DocumentFragment;function t(n,i){n.forEach(s=>{let{name:o,attributes:a,content:h,children:d}=s,u=document.createElement(o),f=zn(u,a),S=Wn(f,h);i.append(S),d&&d.length>0&&t(d,S)})}return t(r,e),e}});var Rt=_(Pt=>{Pt.highlightBtn=function(r){[".addBlog",".addAhaMoment",".addDadHack",".addMainProject",".addSideProject"].forEach(t=>{let n=document.querySelector(t),i=n.classList[0]===r;n.classList.toggle("addContentHighlightBtn",i)})}});var Ut=_(It=>{var{createHTMLComponent:Kn}=$t(),{highlightBtn:Vn}=Rt();function Xn(r,e){let t=`/content/create/${e}`;return r.action=t,r.removeAttribute("enctype"),r}It.changeFormInputs=function({newInputs:r,contentType:e,primaryClass:t}){let n=document.querySelector("form"),i=Xn(n,e),s=Kn(r);i.innerText="",i.append(s),Vn(t)}});var Nt=_((uo,Dt)=>{Dt.exports=[{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectTitle"},content:"Enter a title"},{name:"input",attributes:{id:"mainProjectTitle",name:"title",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectExplanation"},content:"Describe the project"},{name:"textarea",attributes:{id:"mainProjectExplanation",name:"explanation"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectStart"},content:"Enter the start date"},{name:"input",attributes:{id:"mainProjectStart",name:"start",type:"date"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectEnd"},content:"Enter the end date"},{name:"input",attributes:{id:"mainProjectEnd",name:"end_project",type:"date"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectTech"},content:"Enter comma seperated list of tech"},{name:"input",attributes:{id:"mainProjectTech",name:"tech_stack",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectUrl"},content:"Enter app url"},{name:"input",attributes:{id:"mainProjectUrl",name:"url",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectGithub"},content:"Enter app github url"},{name:"input",attributes:{id:"mainProjectGithub",name:"github",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"mainProjectAccomplishments"},content:"Show your key accomplishments"},{name:"textarea",attributes:{id:"mainProjectAccomplishments",name:"accomplishments",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"employerName"},content:"Enter your employer's name"},{name:"input",attributes:{id:"employerName",name:"employerName",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"employerAddress"},content:"Enter your employer's address"},{name:"input",attributes:{id:"employerAddress",name:"employerAddress",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"employerPhoneNo"},content:"Enter your employer's phone number"},{name:"input",attributes:{id:"employerPhoneNo",name:"employerPhoneNo",type:"text"}}]},{name:"button",content:"Submit"}]});var Mt=_((ho,Bt)=>{Bt.exports=[{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"sideProjectTitle"},content:"Enter a title"},{name:"input",attributes:{id:"sideProjectTitle",name:"title",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"sideProjectExplanation"},content:"Describe the project"},{name:"textarea",attributes:{id:"sideProjectExplanation",name:"explanation"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"sideProjectTech"},content:"Enter comma seperated list of tech"},{name:"input",attributes:{id:"sideProjectTech",name:"tech_stack",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"sideProjectUrl"},content:"Enter app url"},{name:"input",attributes:{id:"sideProjectUrl",name:"url",type:"text"}}]},{name:"div",attributes:{class:"inputContainer_noScoped"},children:[{name:"label",attributes:{for:"sideProjectGithub"},content:"Enter app github url"},{name:"input",attributes:{id:"sideProjectGithub",name:"github",type:"text"}}]},{name:"button",content:"Submit"}]});var Ft=_((lo,Lt)=>{var Yn=Ot(),Qn=At(),{changeFormInputs:Te}=Ut(),Zn=Nt(),ei=Mt();Lt.exports={addAhaMoment:{interactionType:"input",eventType:"click",name:"ahaMoment",elementId:"addAhaMoment",fn:function(e){let t=e.target.classList[0];Te({newInputs:Yn,contentType:"ahamoment",primaryClass:t})}},addDadHack:{interactionType:"input",eventType:"click",name:"dadHack",elementId:"addDadHack",fn:function(e){let t="dadhack",n=e.target.classList[0];Te({newInputs:Qn,contentType:t,primaryClass:n})}},addMainProject:{interactionType:"input",eventType:"click",name:"mainProject",elementId:"addMainProject",fn:function(e){let t="mainproject",n=e.target.classList[0];Te({newInputs:Zn,contentType:t,primaryClass:n})}},addSideProject:{interactionType:"input",eventType:"click",name:"SideProject",elementId:"addSideProject",fn:function(e){let t="sideproject",n=e.target.classList[0];Te({newInputs:ei,contentType:t,primaryClass:n})}}}});var Gt=_((fo,Ht)=>{Ht.exports={}});var qt=_((po,Jt)=>{Jt.exports={}});var Wt=_((mo,zt)=>{zt.exports={}});var Ae=_((I,ir)=>{var nr=typeof self!="undefined"?self:I,ke=function(){function r(){this.fetch=!1,this.DOMException=nr.DOMException}return r.prototype=nr,new r}();(function(r){var e=function(t){var n={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function i(c){return c&&DataView.prototype.isPrototypeOf(c)}if(n.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(c){return c&&s.indexOf(Object.prototype.toString.call(c))>-1};function a(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function h(c){return typeof c!="string"&&(c=String(c)),c}function d(c){var l={next:function(){var p=c.shift();return{done:p===void 0,value:p}}};return n.iterable&&(l[Symbol.iterator]=function(){return l}),l}function u(c){this.map={},c instanceof u?c.forEach(function(l,p){this.append(p,l)},this):Array.isArray(c)?c.forEach(function(l){this.append(l[0],l[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(l){this.append(l,c[l])},this)}u.prototype.append=function(c,l){c=a(c),l=h(l);var p=this.map[c];this.map[c]=p?p+", "+l:l},u.prototype.delete=function(c){delete this.map[a(c)]},u.prototype.get=function(c){return c=a(c),this.has(c)?this.map[c]:null},u.prototype.has=function(c){return this.map.hasOwnProperty(a(c))},u.prototype.set=function(c,l){this.map[a(c)]=h(l)},u.prototype.forEach=function(c,l){for(var p in this.map)this.map.hasOwnProperty(p)&&c.call(l,this.map[p],p,this)},u.prototype.keys=function(){var c=[];return this.forEach(function(l,p){c.push(p)}),d(c)},u.prototype.values=function(){var c=[];return this.forEach(function(l){c.push(l)}),d(c)},u.prototype.entries=function(){var c=[];return this.forEach(function(l,p){c.push([p,l])}),d(c)},n.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);function f(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function S(c){return new Promise(function(l,p){c.onload=function(){l(c.result)},c.onerror=function(){p(c.error)}})}function A(c){var l=new FileReader,p=S(l);return l.readAsArrayBuffer(c),p}function C(c){var l=new FileReader,p=S(l);return l.readAsText(c),p}function oe(c){for(var l=new Uint8Array(c),p=new Array(l.length),w=0;w<l.length;w++)p[w]=String.fromCharCode(l[w]);return p.join("")}function wt(c){if(c.slice)return c.slice(0);var l=new Uint8Array(c.byteLength);return l.set(new Uint8Array(c)),l.buffer}function Tt(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:n.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:n.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():n.arrayBuffer&&n.blob&&i(c)?(this._bodyArrayBuffer=wt(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||o(c))?this._bodyArrayBuffer=wt(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var c=f(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(A)}),this.text=function(){var c=f(this);if(c)return c;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(oe(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(Dn)}),this.json=function(){return this.text().then(JSON.parse)},this}var In=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Un(c){var l=c.toUpperCase();return In.indexOf(l)>-1?l:c}function G(c,l){l=l||{};var p=l.body;if(c instanceof G){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,l.headers||(this.headers=new u(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!p&&c._bodyInit!=null&&(p=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new u(l.headers)),this.method=Un(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&p)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(p)}G.prototype.clone=function(){return new G(this,{body:this._bodyInit})};function Dn(c){var l=new FormData;return c.trim().split("&").forEach(function(p){if(p){var w=p.split("="),v=w.shift().replace(/\+/g," "),m=w.join("=").replace(/\+/g," ");l.append(decodeURIComponent(v),decodeURIComponent(m))}}),l}function Nn(c){var l=new u,p=c.replace(/\r?\n[\t ]+/g," ");return p.split(/\r?\n/).forEach(function(w){var v=w.split(":"),m=v.shift().trim();if(m){var Se=v.join(":").trim();l.append(m,Se)}}),l}Tt.call(G.prototype);function $(c,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new u(l.headers),this.url=l.url||"",this._initBody(c)}Tt.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},$.error=function(){var c=new $(null,{status:0,statusText:""});return c.type="error",c};var Bn=[301,302,303,307,308];$.redirect=function(c,l){if(Bn.indexOf(l)===-1)throw new RangeError("Invalid status code");return new $(null,{status:l,headers:{location:c}})},t.DOMException=r.DOMException;try{new t.DOMException}catch{t.DOMException=function(l,p){this.message=l,this.name=p;var w=Error(l);this.stack=w.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function Ve(c,l){return new Promise(function(p,w){var v=new G(c,l);if(v.signal&&v.signal.aborted)return w(new t.DOMException("Aborted","AbortError"));var m=new XMLHttpRequest;function Se(){m.abort()}m.onload=function(){var ae={status:m.status,statusText:m.statusText,headers:Nn(m.getAllResponseHeaders()||"")};ae.url="responseURL"in m?m.responseURL:ae.headers.get("X-Request-URL");var Xe="response"in m?m.response:m.responseText;p(new $(Xe,ae))},m.onerror=function(){w(new TypeError("Network request failed"))},m.ontimeout=function(){w(new TypeError("Network request failed"))},m.onabort=function(){w(new t.DOMException("Aborted","AbortError"))},m.open(v.method,v.url,!0),v.credentials==="include"?m.withCredentials=!0:v.credentials==="omit"&&(m.withCredentials=!1),"responseType"in m&&n.blob&&(m.responseType="blob"),v.headers.forEach(function(ae,Xe){m.setRequestHeader(Xe,ae)}),v.signal&&(v.signal.addEventListener("abort",Se),m.onreadystatechange=function(){m.readyState===4&&v.signal.removeEventListener("abort",Se)}),m.send(typeof v._bodyInit=="undefined"?null:v._bodyInit)})}return Ve.polyfill=!0,r.fetch||(r.fetch=Ve,r.Headers=u,r.Request=G,r.Response=$),t.Headers=u,t.Request=G,t.Response=$,t.fetch=Ve,Object.defineProperty(t,"__esModule",{value:!0}),t}({})})(ke);ke.fetch.ponyfill=!0;delete ke.fetch.polyfill;var X=ke;I=X.fetch;I.default=X.fetch;I.fetch=X.fetch;I.Headers=X.Headers;I.Request=X.Request;I.Response=X.Response;ir.exports=I});var Tr=_((Ta,wr)=>{var Sr=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};wr.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return Sr()}try{return __global__||Sr()}finally{delete Object.prototype.__global__}}()});var Er=_((Ea,hi)=>{hi.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var Or=_((ja,jr)=>{jr.exports=Er().version});var Cr=_((Oa,Ar)=>{var q;if(typeof globalThis=="object")q=globalThis;else try{q=Tr()}catch{}finally{if(!q&&typeof window!="undefined"&&(q=window),!q)throw new Error("Could not determine global this")}var me=q.WebSocket||q.MozWebSocket,li=Or();function kr(r,e){var t;return e?t=new me(r,e):t=new me(r),t}me&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(kr,r,{get:function(){return me[r]}})});Ar.exports={w3cwebsocket:me?kr:null,version:li}});var _n=_((ve,ie)=>{var pi=200,Pr="__lodash_hash_undefined__",Rr=9007199254740991,rt="[object Arguments]",mi="[object Array]",Ir="[object Boolean]",Ur="[object Date]",bi="[object Error]",nt="[object Function]",Dr="[object GeneratorFunction]",Ie="[object Map]",Nr="[object Number]",it="[object Object]",Br="[object Promise]",Mr="[object RegExp]",Ue="[object Set]",Lr="[object String]",Fr="[object Symbol]",st="[object WeakMap]",Hr="[object ArrayBuffer]",De="[object DataView]",Gr="[object Float32Array]",Jr="[object Float64Array]",qr="[object Int8Array]",zr="[object Int16Array]",Wr="[object Int32Array]",Kr="[object Uint8Array]",Vr="[object Uint8ClampedArray]",Xr="[object Uint16Array]",Yr="[object Uint32Array]",gi=/[\\^$.*+?()[\]{}|]/g,yi=/\w*$/,vi=/^\[object .+?Constructor\]$/,_i=/^(?:0|[1-9]\d*)$/,g={};g[rt]=g[mi]=g[Hr]=g[De]=g[Ir]=g[Ur]=g[Gr]=g[Jr]=g[qr]=g[zr]=g[Wr]=g[Ie]=g[Nr]=g[it]=g[Mr]=g[Ue]=g[Lr]=g[Fr]=g[Kr]=g[Vr]=g[Xr]=g[Yr]=!0;g[bi]=g[nt]=g[st]=!1;var xi=typeof global=="object"&&global&&global.Object===Object&&global,Si=typeof self=="object"&&self&&self.Object===Object&&self,B=xi||Si||Function("return this")(),Qr=typeof ve=="object"&&ve&&!ve.nodeType&&ve,Zr=Qr&&typeof ie=="object"&&ie&&!ie.nodeType&&ie,wi=Zr&&Zr.exports===Qr;function Ti(r,e){return r.set(e[0],e[1]),r}function Ei(r,e){return r.add(e),r}function ji(r,e){for(var t=-1,n=r?r.length:0;++t<n&&e(r[t],t,r)!==!1;);return r}function Oi(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}function en(r,e,t,n){var i=-1,s=r?r.length:0;for(n&&s&&(t=r[++i]);++i<s;)t=e(t,r[i],i,r);return t}function ki(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function Ai(r,e){return r==null?void 0:r[e]}function tn(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function rn(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function ot(r,e){return function(t){return r(e(t))}}function nn(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var Ci=Array.prototype,$i=Function.prototype,Ne=Object.prototype,at=B["__core-js_shared__"],sn=function(){var r=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),on=$i.toString,H=Ne.hasOwnProperty,Be=Ne.toString,Pi=RegExp("^"+on.call(H).replace(gi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=wi?B.Buffer:void 0,cn=B.Symbol,un=B.Uint8Array,Ri=ot(Object.getPrototypeOf,Object),Ii=Object.create,Ui=Ne.propertyIsEnumerable,Di=Ci.splice,hn=Object.getOwnPropertySymbols,Ni=an?an.isBuffer:void 0,Bi=ot(Object.keys,Object),ct=ne(B,"DataView"),ge=ne(B,"Map"),ut=ne(B,"Promise"),ht=ne(B,"Set"),lt=ne(B,"WeakMap"),ye=ne(Object,"create"),Mi=K(ct),Li=K(ge),Fi=K(ut),Hi=K(ht),Gi=K(lt),ln=cn?cn.prototype:void 0,dn=ln?ln.valueOf:void 0;function z(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Ji(){this.__data__=ye?ye(null):{}}function qi(r){return this.has(r)&&delete this.__data__[r]}function zi(r){var e=this.__data__;if(ye){var t=e[r];return t===Pr?void 0:t}return H.call(e,r)?e[r]:void 0}function Wi(r){var e=this.__data__;return ye?e[r]!==void 0:H.call(e,r)}function Ki(r,e){var t=this.__data__;return t[r]=ye&&e===void 0?Pr:e,this}z.prototype.clear=Ji;z.prototype.delete=qi;z.prototype.get=zi;z.prototype.has=Wi;z.prototype.set=Ki;function M(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function Vi(){this.__data__=[]}function Xi(r){var e=this.__data__,t=Me(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():Di.call(e,t,1),!0}function Yi(r){var e=this.__data__,t=Me(e,r);return t<0?void 0:e[t][1]}function Qi(r){return Me(this.__data__,r)>-1}function Zi(r,e){var t=this.__data__,n=Me(t,r);return n<0?t.push([r,e]):t[n][1]=e,this}M.prototype.clear=Vi;M.prototype.delete=Xi;M.prototype.get=Yi;M.prototype.has=Qi;M.prototype.set=Zi;function te(r){var e=-1,t=r?r.length:0;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}function es(){this.__data__={hash:new z,map:new(ge||M),string:new z}}function ts(r){return Le(this,r).delete(r)}function rs(r){return Le(this,r).get(r)}function ns(r){return Le(this,r).has(r)}function is(r,e){return Le(this,r).set(r,e),this}te.prototype.clear=es;te.prototype.delete=ts;te.prototype.get=rs;te.prototype.has=ns;te.prototype.set=is;function re(r){this.__data__=new M(r)}function ss(){this.__data__=new M}function os(r){return this.__data__.delete(r)}function as(r){return this.__data__.get(r)}function cs(r){return this.__data__.has(r)}function us(r,e){var t=this.__data__;if(t instanceof M){var n=t.__data__;if(!ge||n.length<pi-1)return n.push([r,e]),this;t=this.__data__=new te(n)}return t.set(r,e),this}re.prototype.clear=ss;re.prototype.delete=os;re.prototype.get=as;re.prototype.has=cs;re.prototype.set=us;function hs(r,e){var t=pt(r)||Is(r)?ki(r.length,String):[],n=t.length,i=!!n;for(var s in r)(e||H.call(r,s))&&!(i&&(s=="length"||Cs(s,n)))&&t.push(s);return t}function fn(r,e,t){var n=r[e];(!(H.call(r,e)&&gn(n,t))||t===void 0&&!(e in r))&&(r[e]=t)}function Me(r,e){for(var t=r.length;t--;)if(gn(r[t][0],e))return t;return-1}function ls(r,e){return r&&pn(e,mt(e),r)}function dt(r,e,t,n,i,s,o){var a;if(n&&(a=s?n(r,i,s,o):n(r)),a!==void 0)return a;if(!Fe(r))return r;var h=pt(r);if(h){if(a=Os(r),!e)return Ts(r,a)}else{var d=W(r),u=d==nt||d==Dr;if(Ds(r))return gs(r,e);if(d==it||d==rt||u&&!s){if(tn(r))return s?r:{};if(a=ks(u?{}:r),!e)return Es(r,ls(a,r))}else{if(!g[d])return s?r:{};a=As(r,d,dt,e)}}o||(o=new re);var f=o.get(r);if(f)return f;if(o.set(r,a),!h)var S=t?js(r):mt(r);return ji(S||r,function(A,C){S&&(C=A,A=r[C]),fn(a,C,dt(A,e,t,n,C,r,o))}),a}function ds(r){return Fe(r)?Ii(r):{}}function fs(r,e,t){var n=e(r);return pt(r)?n:Oi(n,t(r))}function ps(r){return Be.call(r)}function ms(r){if(!Fe(r)||Ps(r))return!1;var e=vn(r)||tn(r)?Pi:vi;return e.test(K(r))}function bs(r){if(!bn(r))return Bi(r);var e=[];for(var t in Object(r))H.call(r,t)&&t!="constructor"&&e.push(t);return e}function gs(r,e){if(e)return r.slice();var t=new r.constructor(r.length);return r.copy(t),t}function ft(r){var e=new r.constructor(r.byteLength);return new un(e).set(new un(r)),e}function ys(r,e){var t=e?ft(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}function vs(r,e,t){var n=e?t(rn(r),!0):rn(r);return en(n,Ti,new r.constructor)}function _s(r){var e=new r.constructor(r.source,yi.exec(r));return e.lastIndex=r.lastIndex,e}function xs(r,e,t){var n=e?t(nn(r),!0):nn(r);return en(n,Ei,new r.constructor)}function Ss(r){return dn?Object(dn.call(r)):{}}function ws(r,e){var t=e?ft(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}function Ts(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}function pn(r,e,t,n){t||(t={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(t[o],r[o],o,t,r):void 0;fn(t,o,a===void 0?r[o]:a)}return t}function Es(r,e){return pn(r,mn(r),e)}function js(r){return fs(r,mt,mn)}function Le(r,e){var t=r.__data__;return $s(e)?t[typeof e=="string"?"string":"hash"]:t.map}function ne(r,e){var t=Ai(r,e);return ms(t)?t:void 0}var mn=hn?ot(hn,Object):Ms,W=ps;(ct&&W(new ct(new ArrayBuffer(1)))!=De||ge&&W(new ge)!=Ie||ut&&W(ut.resolve())!=Br||ht&&W(new ht)!=Ue||lt&&W(new lt)!=st)&&(W=function(r){var e=Be.call(r),t=e==it?r.constructor:void 0,n=t?K(t):void 0;if(n)switch(n){case Mi:return De;case Li:return Ie;case Fi:return Br;case Hi:return Ue;case Gi:return st}return e});function Os(r){var e=r.length,t=r.constructor(e);return e&&typeof r[0]=="string"&&H.call(r,"index")&&(t.index=r.index,t.input=r.input),t}function ks(r){return typeof r.constructor=="function"&&!bn(r)?ds(Ri(r)):{}}function As(r,e,t,n){var i=r.constructor;switch(e){case Hr:return ft(r);case Ir:case Ur:return new i(+r);case De:return ys(r,n);case Gr:case Jr:case qr:case zr:case Wr:case Kr:case Vr:case Xr:case Yr:return ws(r,n);case Ie:return vs(r,n,t);case Nr:case Lr:return new i(r);case Mr:return _s(r);case Ue:return xs(r,n,t);case Fr:return Ss(r)}}function Cs(r,e){return e=e??Rr,!!e&&(typeof r=="number"||_i.test(r))&&r>-1&&r%1==0&&r<e}function $s(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ps(r){return!!sn&&sn in r}function bn(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Ne;return r===t}function K(r){if(r!=null){try{return on.call(r)}catch{}try{return r+""}catch{}}return""}function Rs(r){return dt(r,!0,!0)}function gn(r,e){return r===e||r!==r&&e!==e}function Is(r){return Us(r)&&H.call(r,"callee")&&(!Ui.call(r,"callee")||Be.call(r)==rt)}var pt=Array.isArray;function yn(r){return r!=null&&Ns(r.length)&&!vn(r)}function Us(r){return Bs(r)&&yn(r)}var Ds=Ni||Ls;function vn(r){var e=Fe(r)?Be.call(r):"";return e==nt||e==Dr}function Ns(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Rr}function Fe(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function Bs(r){return!!r&&typeof r=="object"}function mt(r){return yn(r)?hs(r):bs(r)}function Ms(){return[]}function Ls(){return!1}ie.exports=Rs});var An=R(Ft()),Cn=R(Gt()),$n=R(qt()),Pn=R(Wt());var Kt="1.31.2";var Ye={"X-Client-Info":`supabase-js/${Kt}`},Vt="supabase.auth.token";function Xt(r){return r.replace(/\/$/,"")}var Yt=()=>typeof window!="undefined";var ce=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},ti=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),ri=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:ti(t),status:(r==null?void 0:r.status)||500}))},ni=(r,e,t)=>{let n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||(n.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(t)),n};function Ee(r,e,t,n,i){return ce(this,void 0,void 0,function*(){return new Promise((s,o)=>{r(t,ni(e,n,i)).then(a=>{if(!a.ok)throw a;return(n==null?void 0:n.noResolveJson)?s:a.json()}).then(a=>s(a)).catch(a=>ri(a,o))})})}function je(r,e,t){return ce(this,void 0,void 0,function*(){return Ee(r,"GET",e,t)})}function T(r,e,t,n){return ce(this,void 0,void 0,function*(){return Ee(r,"POST",e,n,t)})}function Qe(r,e,t,n){return ce(this,void 0,void 0,function*(){return Ee(r,"PUT",e,n,t)})}function Qt(r,e,t,n){return ce(this,void 0,void 0,function*(){return Ee(r,"DELETE",e,n,t)})}var Zt="1.22.8";var er="http://localhost:9999";var tr={"X-Client-Info":`gotrue-js/${Zt}`},wo=60*1e3,V="supabase.auth.token",rr={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};function ii(r,e,t){let n=t||{},i=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!s.test(r))throw new TypeError("argument name is invalid");let o=i(e);if(o&&!s.test(o))throw new TypeError("argument val is invalid");let a=r+"="+o;if(n.maxAge!=null){let h=n.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(h)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function si(r){if(!r||!r.headers||!r.headers.host)throw new Error('The "host" request header is not available');let e=r.headers.host.indexOf(":")>-1&&r.headers.host.split(":")[0]||r.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function oi(r,e){var t,n,i;return ii(r.name,r.value,{maxAge:r.maxAge,expires:new Date(Date.now()+r.maxAge*1e3),httpOnly:!0,secure:e,path:(t=r.path)!==null&&t!==void 0?t:"/",domain:(n=r.domain)!==null&&n!==void 0?n:"",sameSite:(i=r.sameSite)!==null&&i!==void 0?i:"lax"})}function Oe(r,e,t){let n=t.map(s=>oi(s,si(r))),i=e.getHeader("Set-Cookie");return i&&(i instanceof Array?Array.prototype.push.apply(n,i):typeof i=="string"&&n.push(i)),n}function ue(r,e,t){e.setHeader("Set-Cookie",Oe(r,e,t))}var sr=R(Ae());function U(r){return Math.round(Date.now()/1e3)+r}function or(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}var D=()=>typeof window!="undefined";function N(r,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");let n=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}var ar=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=sr.default:e=fetch,(...t)=>e(...t)};var y=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},he=class{constructor({url:e="",headers:t={},cookieOptions:n,fetch:i}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},rr),n),this.fetch=ar(i)}_createRequestHeaders(e){let t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){let n=[`provider=${encodeURIComponent(e)}`];return(t==null?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(t==null?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),`${this.url}/authorize?${n.join("&")}`}signUpWithEmail(e,t,n={}){return y(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),s="";n.redirectTo&&(s="?redirect_to="+encodeURIComponent(n.redirectTo));let o=yield T(this.fetch,`${this.url}/signup${s}`,{email:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:i}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=U(o.expires_in)),{data:a,error:null}}catch(i){return{data:null,error:i}}})}signInWithEmail(e,t,n={}){return y(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),s="?grant_type=password";n.redirectTo&&(s+="&redirect_to="+encodeURIComponent(n.redirectTo));let o=yield T(this.fetch,`${this.url}/token${s}`,{email:e,password:t},{headers:i}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=U(o.expires_in)),{data:a,error:null}}catch(i){return{data:null,error:i}}})}signUpWithPhone(e,t,n={}){return y(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),s=yield T(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:i}),o=Object.assign({},s);return o.expires_in&&(o.expires_at=U(s.expires_in)),{data:o,error:null}}catch(i){return{data:null,error:i}}})}signInWithPhone(e,t){return y(this,void 0,void 0,function*(){try{let n=Object.assign({},this.headers),i="?grant_type=password",s=yield T(this.fetch,`${this.url}/token${i}`,{phone:e,password:t},{headers:n}),o=Object.assign({},s);return o.expires_in&&(o.expires_at=U(s.expires_in)),{data:o,error:null}}catch(n){return{data:null,error:n}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:n,issuer:i,provider:s}){return y(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),a="?grant_type=id_token",h=yield T(this.fetch,`${this.url}/token${a}`,{id_token:e,nonce:t,client_id:n,issuer:i,provider:s},{headers:o}),d=Object.assign({},h);return d.expires_in&&(d.expires_at=U(h.expires_in)),{data:d,error:null}}catch(o){return{data:null,error:o}}})}sendMagicLinkEmail(e,t={}){var n;return y(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),s="";t.redirectTo&&(s+="?redirect_to="+encodeURIComponent(t.redirectTo));let o=(n=t.shouldCreateUser)!==null&&n!==void 0?n:!0;return{data:yield T(this.fetch,`${this.url}/otp${s}`,{email:e,create_user:o,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:i}),error:null}}catch(i){return{data:null,error:i}}})}sendMobileOTP(e,t={}){var n;return y(this,void 0,void 0,function*(){try{let i=(n=t.shouldCreateUser)!==null&&n!==void 0?n:!0,s=Object.assign({},this.headers);return{data:yield T(this.fetch,`${this.url}/otp`,{phone:e,create_user:i,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:s}),error:null}}catch(i){return{data:null,error:i}}})}signOut(e){return y(this,void 0,void 0,function*(){try{return yield T(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,n={}){return y(this,void 0,void 0,function*(){try{let i=Object.assign({},this.headers),s=yield T(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:n.redirectTo},{headers:i}),o=Object.assign({},s);return o.expires_in&&(o.expires_at=U(s.expires_in)),{data:o,error:null}}catch(i){return{data:null,error:i}}})}verifyOTP({email:e,phone:t,token:n,type:i="sms"},s={}){return y(this,void 0,void 0,function*(){try{let o=Object.assign({},this.headers),a=yield T(this.fetch,`${this.url}/verify`,{email:e,phone:t,token:n,type:i,redirect_to:s.redirectTo},{headers:o}),h=Object.assign({},a);return h.expires_in&&(h.expires_at=U(a.expires_in)),{data:h,error:null}}catch(o){return{data:null,error:o}}})}inviteUserByEmail(e,t={}){return y(this,void 0,void 0,function*(){try{let n=Object.assign({},this.headers),i="";return t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield T(this.fetch,`${this.url}/invite${i}`,{email:e,data:t.data},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}resetPasswordForEmail(e,t={}){return y(this,void 0,void 0,function*(){try{let n=Object.assign({},this.headers),i="";return t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield T(this.fetch,`${this.url}/recover${i}`,{email:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}refreshAccessToken(e){return y(this,void 0,void 0,function*(){try{let t=yield T(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),n=Object.assign({},t);return n.expires_in&&(n.expires_at=U(t.expires_in)),{data:n,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));let{event:n,session:i}=e.body;if(!n)throw new Error("Auth event missing!");if(n==="SIGNED_IN"){if(!i)throw new Error("Auth session missing!");ue(e,t,[{key:"access-token",value:i.access_token},{key:"refresh-token",value:i.refresh_token}].map(s=>{var o;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}n==="SIGNED_OUT"&&ue(e,t,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:n="/"}){return ue(e,t,["access-token","refresh-token"].map(i=>({name:`${this.cookieName()}-${i}`,value:"",maxAge:-1}))),t.redirect(307,n)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));let{event:n,session:i}=e.body;if(!n)throw new Error("Auth event missing!");if(n==="SIGNED_IN"){if(!i)throw new Error("Auth session missing!");return Oe(e,t,[{key:"access-token",value:i.access_token},{key:"refresh-token",value:i.refresh_token}].map(s=>{var o;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return n==="SIGNED_OUT"?Oe(e,t,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,n={}){return y(this,void 0,void 0,function*(){try{return{data:yield T(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:n.password,data:n.data,redirect_to:n.redirectTo},{headers:this.headers}),error:null}}catch(i){return{data:null,error:i}}})}createUser(e){return y(this,void 0,void 0,function*(){try{let t=yield T(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return y(this,void 0,void 0,function*(){try{return{data:(yield je(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return y(this,void 0,void 0,function*(){try{return{data:yield je(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return y(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");let n=e.cookies[`${this.cookieName()}-access-token`],i=e.cookies[`${this.cookieName()}-refresh-token`];if(!n)throw new Error("No cookie found!");let{user:s,error:o}=yield this.getUser(n);if(o){if(!i)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");let{data:a,error:h}=yield this.refreshAccessToken(i);if(h)throw h;if(a)return ue(e,t,[{key:"access-token",value:a.access_token},{key:"refresh-token",value:a.refresh_token}].map(d=>{var u;return{name:`${this.cookieName()}-${d.key}`,value:d.value,domain:this.cookieOptions.domain,maxAge:(u=this.cookieOptions.lifetime)!==null&&u!==void 0?u:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:a.access_token,user:a.user,data:a.user,error:null}}return{token:n,user:s,data:s,error:null}}catch(n){return{token:null,user:null,data:null,error:n}}})}updateUserById(e,t){return y(this,void 0,void 0,function*(){try{let n=yield Qe(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}deleteUser(e){return y(this,void 0,void 0,function*(){try{let t=yield Qt(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return y(this,void 0,void 0,function*(){try{let t=yield je(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return y(this,void 0,void 0,function*(){try{let n=yield Qe(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}};function cr(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}var j=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})};cr();var ai={url:er,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:tr},le=class{constructor(e){this.stateChangeEmitters=new Map;let t=Object.assign(Object.assign({},ai),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new he({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),t.detectSessionInUrl&&D()&&!!N("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:n})=>{n&&console.error("Error getting session from URL.",n)})}signUp({email:e,password:t,phone:n},i={}){return j(this,void 0,void 0,function*(){try{this._removeSession();let{data:s,error:o}=n&&t?yield this.api.signUpWithPhone(n,t,{data:i.data,captchaToken:i.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:i.redirectTo,data:i.data,captchaToken:i.captchaToken});if(o)throw o;if(!s)throw"An error occurred on sign up.";let a=null,h=null;return s.access_token&&(a=s,h=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),s.id&&(h=s),{user:h,session:a,error:null}}catch(s){return{user:null,session:null,error:s}}})}signIn({email:e,phone:t,password:n,refreshToken:i,provider:s,oidc:o},a={}){return j(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!n){let{error:h}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:h}}if(e&&n)return this._handleEmailSignIn(e,n,{redirectTo:a.redirectTo});if(t&&!n){let{error:h}=yield this.api.sendMobileOTP(t,{shouldCreateUser:a.shouldCreateUser,captchaToken:a.captchaToken});return{user:null,session:null,error:h}}if(t&&n)return this._handlePhoneSignIn(t,n);if(i){let{error:h}=yield this._callRefreshToken(i);if(h)throw h;return{user:this.currentUser,session:this.currentSession,error:null}}if(s)return this._handleProviderSignIn(s,{redirectTo:a.redirectTo,scopes:a.scopes});if(o)return this._handleOpenIDConnectSignIn(o);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(h){return{user:null,session:null,error:h}}})}verifyOTP(e,t={}){return j(this,void 0,void 0,function*(){try{this._removeSession();let{data:n,error:i}=yield this.api.verifyOTP(e,t);if(i)throw i;if(!n)throw"An error occurred on token verification.";let s=null,o=null;return n.access_token&&(s=n,o=s.user,this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN")),n.id&&(o=n),{user:o,session:s,error:null}}catch(n){return{user:null,session:null,error:n}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return j(this,void 0,void 0,function*(){try{if(!((e=this.currentSession)===null||e===void 0?void 0:e.access_token))throw new Error("Not logged in.");let{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return j(this,void 0,void 0,function*(){try{if(!((t=this.currentSession)===null||t===void 0?void 0:t.access_token))throw new Error("Not logged in.");let{user:n,error:i}=yield this.api.updateUser(this.currentSession.access_token,e);if(i)throw i;if(!n)throw Error("Invalid user data.");let s=Object.assign(Object.assign({},this.currentSession),{user:n});return this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED"),{data:n,user:n,error:null}}catch(n){return{data:null,user:null,error:n}}})}setSession(e){return j(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");let{data:t,error:n}=yield this.api.refreshAccessToken(e);return n?{session:null,error:n}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}getSessionFromUrl(e){return j(this,void 0,void 0,function*(){try{if(!D())throw new Error("No browser detected.");let t=N("error_description");if(t)throw new Error(t);let n=N("provider_token"),i=N("access_token");if(!i)throw new Error("No access_token detected.");let s=N("expires_in");if(!s)throw new Error("No expires_in detected.");let o=N("refresh_token");if(!o)throw new Error("No refresh_token detected.");let a=N("token_type");if(!a)throw new Error("No token_type detected.");let d=Math.round(Date.now()/1e3)+parseInt(s),{user:u,error:f}=yield this.api.getUser(i);if(f)throw f;let S={provider_token:n,access_token:i,expires_in:parseInt(s),expires_at:d,refresh_token:o,token_type:a,user:u};if(e==null?void 0:e.storeSession){this._saveSession(S);let A=N("type");this._notifyAllSubscribers("SIGNED_IN"),A==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:S,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return j(this,void 0,void 0,function*(){let t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){let{error:n}=yield this.api.signOut(t);if(n)return{error:n}}return{error:null}})}onAuthStateChange(e){try{let t=or(),n={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:n,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,n={}){var i,s;return j(this,void 0,void 0,function*(){try{let{data:o,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:n.redirectTo});return a||!o?{data:null,user:null,session:null,error:a}:((((i=o==null?void 0:o.user)===null||i===void 0?void 0:i.confirmed_at)||((s=o==null?void 0:o.user)===null||s===void 0?void 0:s.email_confirmed_at))&&(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),{data:o,user:o.user,session:o,error:null})}catch(o){return{data:null,user:null,session:null,error:o}}})}_handlePhoneSignIn(e,t){var n;return j(this,void 0,void 0,function*(){try{let{data:i,error:s}=yield this.api.signInWithPhone(e,t);return s||!i?{data:null,user:null,session:null,error:s}:(((n=i==null?void 0:i.user)===null||n===void 0?void 0:n.phone_confirmed_at)&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handleProviderSignIn(e,t={}){let n=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return D()&&(window.location.href=n),{provider:e,url:n,data:null,session:null,user:null,error:null}}catch(i){return n?{provider:e,url:n,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:i}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:n,issuer:i,provider:s}){return j(this,void 0,void 0,function*(){if(e&&t&&(n&&i||s))try{let{data:o,error:a}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:n,issuer:i,provider:s});return a||!o?{user:null,session:null,error:a}:(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN"),{user:o.user,session:o,error:null})}catch(o){return{user:null,session:null,error:o}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){var e;try{let t=D()&&((e=this.localStorage)===null||e===void 0?void 0:e.getItem(V));if(!t||typeof t!="string")return null;let n=JSON.parse(t),{currentSession:i,expiresAt:s}=n,o=Math.round(Date.now()/1e3);s>=o&&(i==null?void 0:i.user)&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN"))}catch(t){console.log("error",t)}}_recoverAndRefresh(){return j(this,void 0,void 0,function*(){try{let e=D()&&(yield this.localStorage.getItem(V));if(!e)return null;let t=JSON.parse(e),{currentSession:n,expiresAt:i}=t,s=Math.round(Date.now()/1e3);if(i<s)if(this.autoRefreshToken&&n.refresh_token){let{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.log(o.message),yield this._removeSession())}else this._removeSession();else n?(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN")):(console.log("Current session is missing data."),this._removeSession())}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),j(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");let{data:n,error:i}=yield this.api.refreshAccessToken(e);if(i)throw i;if(!n)throw Error("Invalid session data.");return this._saveSession(n),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:n,error:null}}catch(n){return{data:null,error:n}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;let t=e.expires_at;if(t){let n=Math.round(Date.now()/1e3),i=t-n,s=i>60?60:.5;this._startAutoRefreshToken((i-s)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){let t={currentSession:e,expiresAt:e.expires_at};D()&&this.localStorage.setItem(V,JSON.stringify(t))}_removeSession(){return j(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),D()&&(yield this.localStorage.removeItem(V))})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>this._callRefreshToken(),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!D()||!(window==null?void 0:window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===V){let n=JSON.parse(String(e.newValue));((t=n==null?void 0:n.currentSession)===null||t===void 0?void 0:t.access_token)?(this._recoverAndRefresh(),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}};var Ze=class extends le{constructor(e){super(e)}};var ur=R(Ae()),ci=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},F=class{constructor(e){Object.assign(this,e);let t;e.fetch?t=e.fetch:typeof fetch=="undefined"?t=ur.default:t=fetch,this.fetch=(...n)=>t(...n),this.shouldThrowOnError=e.shouldThrowOnError||!1}throwOnError(e){return e==null&&(e=!0),this.shouldThrowOnError=e,this}then(e,t){typeof this.schema=="undefined"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let n=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>ci(this,void 0,void 0,function*(){var s,o,a;let h=null,d=null,u=null;if(i.ok){let S=(s=this.headers.Prefer)===null||s===void 0?void 0:s.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!S){let oe=yield i.text();oe&&(this.headers.Accept==="text/csv"?d=oe:d=JSON.parse(oe))}let A=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),C=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");A&&C&&C.length>1&&(u=parseInt(C[1]))}else{let S=yield i.text();try{h=JSON.parse(S)}catch{h={message:S}}if(h&&this.shouldThrowOnError)throw h}return{error:h,data:d,count:u,status:i.status,statusText:i.statusText,body:d}}));return this.shouldThrowOnError||(n=n.catch(i=>({error:{message:`FetchError: ${i.message}`,details:"",hint:"",code:i.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),n.then(e,t)}};var Y=class extends F{select(e="*"){let t=!1,n=e.split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this}order(e,{ascending:t=!0,nullsFirst:n=!1,foreignTable:i}={}){let s=typeof i=="undefined"?"order":`${i}.order`,o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}.${n?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){let n=typeof t=="undefined"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){let i=typeof n=="undefined"?"offset":`${n}.offset`,s=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){this.headers.Accept="application/vnd.pgrst.object+json";let e=new Y(this);return e.then=(t,n)=>this.then(i=>{var s,o;return((o=(s=i.error)===null||s===void 0?void 0:s.details)===null||o===void 0?void 0:o.includes("Results contain 0 rows"))?t({error:null,data:null,count:i.count,status:200,statusText:"OK",body:null}):t(i)},n),e}csv(){return this.headers.Accept="text/csv",this}};var k=class extends Y{constructor(){super(...arguments);this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,n){return this.url.searchParams.append(`${e}`,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){let n=typeof t=="undefined"?"or":`${t}.or`;return this.url.searchParams.append(n,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){let n=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i=null}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(`${e}`,`${s}fts${o}.${t}`),this}fts(e,t,{config:n}={}){let i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`fts${i}.${t}`),this}plfts(e,t,{config:n}={}){let i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`plfts${i}.${t}`),this}phfts(e,t,{config:n}={}){let i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`phfts${i}.${t}`),this}wfts(e,t,{config:n}={}){let i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`wfts${i}.${t}`),this}filter(e,t,n){return this.url.searchParams.append(`${e}`,`${t}.${n}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}};var J=class extends F{constructor(e,{headers:t={},schema:n,fetch:i,shouldThrowOnError:s}={}){super({fetch:i,shouldThrowOnError:s});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}select(e="*",{head:t=!1,count:n=null}={}){this.method="GET";let i=!1,s=e.split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),t&&(this.method="HEAD"),new k(this)}insert(e,{upsert:t=!1,onConflict:n,returning:i="representation",count:s=null}={}){this.method="POST";let o=[`return=${i}`];if(t&&o.push("resolution=merge-duplicates"),t&&n!==void 0&&this.url.searchParams.set("on_conflict",n),this.body=e,s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),Array.isArray(e)){let a=e.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(a.length>0){let h=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new k(this)}upsert(e,{onConflict:t,returning:n="representation",count:i=null,ignoreDuplicates:s=!1}={}){this.method="POST";let o=[`resolution=${s?"ignore":"merge"}-duplicates`,`return=${n}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new k(this)}update(e,{returning:t="representation",count:n=null}={}){this.method="PATCH";let i=[`return=${t}`];return this.body=e,n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new k(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";let n=[`return=${e}`];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new k(this)}};var Ce=class extends F{constructor(e,{headers:t={},schema:n,fetch:i,shouldThrowOnError:s}={}){super({fetch:i,shouldThrowOnError:s});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}rpc(e,{head:t=!1,count:n=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([i,s])=>{this.url.searchParams.append(i,s)})):(this.method="POST",this.body=e),n&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${n}`:this.headers.Prefer=`count=${n}`),new k(this)}};var hr="0.37.1";var lr={"X-Client-Info":`postgrest-js/${hr}`};var de=class{constructor(e,{headers:t={},schema:n,fetch:i,throwOnError:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},lr),t),this.schema=n,this.fetch=i,this.shouldThrowOnError=s}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){let t=`${this.url}/${e}`;return new J(t,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:n=!1,count:i=null}={}){let s=`${this.url}/rpc/${e}`;return new Ce(s,{headers:this.headers,schema:this.schema,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError}).rpc(t,{head:n,count:i})}};var fe={};Jn(fe,{PostgresTypes:()=>b,convertCell:()=>et,convertChangeData:()=>ui,convertColumn:()=>dr,toArray:()=>br,toBoolean:()=>fr,toJson:()=>mr,toNumber:()=>pr,toTimestampString:()=>gr});var b;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(b||(b={}));var ui=(r,e,t={})=>{var n;let i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=dr(o,r,e,i),s),{})},dr=(r,e,t,n)=>{let i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?et(s,o):tt(o)},et=(r,e)=>{if(r.charAt(0)==="_"){let t=r.slice(1,r.length);return br(e,t)}switch(r){case b.bool:return fr(e);case b.float4:case b.float8:case b.int2:case b.int4:case b.int8:case b.numeric:case b.oid:return pr(e);case b.json:case b.jsonb:return mr(e);case b.timestamp:return gr(e);case b.abstime:case b.date:case b.daterange:case b.int4range:case b.int8range:case b.money:case b.reltime:case b.text:case b.time:case b.timestamptz:case b.timetz:case b.tsrange:case b.tstzrange:return tt(e);default:return tt(e)}},tt=r=>r,fr=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},pr=r=>{if(typeof r=="string"){let e=parseFloat(r);if(!Number.isNaN(e))return e}return r},mr=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},br=(r,e)=>{if(typeof r!="string")return r;let t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s,o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>et(e,a))}return r},gr=r=>typeof r=="string"?r.replace(" ","T"):r;var yr="1.4.0";var vr={"X-Client-Info":`realtime-js/${yr}`},_r="1.0.0",$e=1e4,xr=1e3,Q;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Q||(Q={}));var E;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(E||(E={}));var O;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(O||(O={}));var Pe;(function(r){r.websocket="websocket"})(Pe||(Pe={}));var Z=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ee=class{constructor(e,t,n={},i=$e){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var pe=class{constructor(e,t={},n){this.topic=e,this.params=t,this.socket=n,this.bindings=[],this.state=E.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new ee(this,O.join,this.params,this.timeout),this.rejoinTimer=new Z(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=E.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=E.closed,this.socket.remove(this)}),this.onError(i=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=E.errored,this.rejoinTimer.scheduleTimeout())}),this.on(O.reply,(i,s)=>{this.trigger(this.replyEventName(s),i)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(O.close,e)}onError(e){this.on(O.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ee(this,e,t,n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=E.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(O.close,"leave",this.joinRef())};this.joinPush.destroy();let n=new ee(this,O.leave,{},e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=E.joining,this.joinPush.resend(e))}trigger(e,t,n){let{close:i,error:s,leave:o,join:a}=O;if(n&&[i,s,o,a].indexOf(e)>=0&&n!==this.joinRef())return;let d=this.onMessage(e,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(u=>u.event==="*"?e===(t==null?void 0:t.type):u.event===e).map(u=>u.callback(d,n))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===E.closed}isErrored(){return this.state===E.errored}isJoined(){return this.state===E.joined}isJoining(){return this.state===E.joining}isLeaving(){return this.state===E.leaving}};var $r=R(Cr());var Re=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){let i=t.getUint8(1),s=t.getUint8(2),o=this.HEADER_LENGTH+2,a=n.decode(e.slice(o,o+i));o=o+i;let h=n.decode(e.slice(o,o+s));o=o+s;let d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:h,payload:d}}};var di=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},fi=()=>{},be=class{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=vr,this.params={},this.timeout=$e,this.transport=$r.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fi,this.conn=null,this.sendBuffer=[],this.serializer=new Re,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${Pe.websocket}`,(t==null?void 0:t.params)&&(this.params=t.params),(t==null?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(t==null?void 0:t.timeout)&&(this.timeout=t.timeout),(t==null?void 0:t.logger)&&(this.logger=t.logger),(t==null?void 0:t.transport)&&(this.transport=t.transport),(t==null?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),(t==null?void 0:t.longpollerTimeout)&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=(t==null?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=(t==null?void 0:t.encode)?t.encode:(n,i)=>i(JSON.stringify(n)),this.decode=(t==null?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Z(()=>di(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((n,i)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),n({error:null,data:!0})}catch(s){n({error:s,data:!1})}})}log(e,t,n){this.logger(e,t,n)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case Q.connecting:return"connecting";case Q.open:return"open";case Q.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){let n=new pe(e,t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var h;(h=this.conn)===null||h===void 0||h.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a.isMember(n)).forEach(a=>a.trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:_r}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e;try{this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(O.access_token,{access_token:e})})}catch(t){console.log("setAuth error",t)}}leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n.isJoined()||n.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(O.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(xr,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var Fs=R(_n());var bt=class{constructor(e,t,n,i){let s={},o=i==="*"?`realtime:${n}`:`realtime:${n}:${i}`,a=t.Authorization.split(" ")[1];a&&(s.user_token=a),this.subscription=e.channel(o,s)}getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=fe.convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=fe.convertChangeData(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,n=>{let i={schema:n.schema,table:n.table,commit_timestamp:n.commit_timestamp,eventType:n.type,new:{},old:{},errors:n.errors};i=Object.assign(Object.assign({},i),this.getPayloadRecords(n)),t(i)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}};var gt=class extends J{constructor(e,{headers:t={},schema:n,realtime:i,table:s,fetch:o,shouldThrowOnError:a}){super(e,{headers:t,schema:n,fetch:o,shouldThrowOnError:a});this._subscription=null,this._realtime=i,this._headers=t,this._schema=n,this._table=s}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new bt(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}};var xn="0.0.0";var Sn={"X-Client-Info":`storage-js/${xn}`};var _e=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},Hs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Gs=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:Hs(t),status:(r==null?void 0:r.status)||500}))},Js=(r,e,t,n)=>{let i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function He(r,e,t,n,i,s){return _e(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Js(e,n,i,s)).then(h=>{if(!h.ok)throw h;return(n==null?void 0:n.noResolveJson)?o(h):h.json()}).then(h=>o(h)).catch(h=>Gs(h,a))})})}function xe(r,e,t,n){return _e(this,void 0,void 0,function*(){return He(r,"GET",e,t,n)})}function L(r,e,t,n,i){return _e(this,void 0,void 0,function*(){return He(r,"POST",e,n,i,t)})}function wn(r,e,t,n,i){return _e(this,void 0,void 0,function*(){return He(r,"PUT",e,n,i,t)})}function Ge(r,e,t,n,i){return _e(this,void 0,void 0,function*(){return He(r,"DELETE",e,n,i,t)})}var Tn=R(Ae()),Je=r=>{let e;return r?e=r:typeof fetch=="undefined"?e=Tn.default:e=fetch,(...t)=>e(...t)};var se=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},yt=class{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Sn),t),this.fetch=Je(n)}listBuckets(){return se(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield xe(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return se(this,void 0,void 0,function*(){try{return{data:(yield L(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(n){return{data:null,error:n}}})}updateBucket(e,t){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}emptyBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}};var P=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},qs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},vt=class{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Je(i)}uploadOrUpdate(e,t,n,i){return P(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},zs),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob!="undefined"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",n)):typeof FormData!="undefined"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl)):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);let h=this._removeEmptyFolders(t),d=this._getFinalPath(h),u=yield this.fetch(`${this.url}/object/${d}`,{method:e,body:s,headers:a});if(u.ok)return{data:{Key:d},error:null};{let f=yield u.json();return{data:null,error:f}}}catch(s){return{data:null,error:s}}})}upload(e,t,n){return P(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}update(e,t,n){return P(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return P(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}copy(e,t){return P(this,void 0,void 0,function*(){try{return{data:yield L(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createSignedUrl(e,t){return P(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield L(this.fetch,`${this.url}/object/sign/${n}`,{expiresIn:t},{headers:this.headers}),s=`${this.url}${i.signedURL}`;return i={signedURL:s},{data:i,error:null,signedURL:s}}catch(n){return{data:null,error:n,signedURL:null}}})}createSignedUrls(e,t){return P(this,void 0,void 0,function*(){try{return{data:(yield L(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers})).map(i=>Object.assign(Object.assign({},i),{signedURL:i.signedURL?`${this.url}${i.signedURL}`:null})),error:null}}catch(n){return{data:null,error:n}}})}download(e){return P(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);return{data:yield(yield xe(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{let t=this._getFinalPath(e),n=`${this.url}/object/public/${t}`;return{data:{publicURL:n},error:null,publicURL:n}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return P(this,void 0,void 0,function*(){try{return{data:yield Ge(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,n){return P(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},qs),t),{prefix:e||""});return{data:yield L(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){return{data:null,error:i}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}};var qe=class extends yt{constructor(e,t={},n){super(e,t,n)}from(e){return new vt(this.url,this.headers,e,this.fetch)}};var _t=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{d(n.next(u))}catch(f){o(f)}}function h(u){try{d(n.throw(u))}catch(f){o(f)}}function d(u){u.done?s(u.value):i(u.value).then(a,h)}d((n=n.apply(r,e||[])).next())})},Ws={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:Ye},ze=class{constructor(e,t,n){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let i=Xt(e),s=Object.assign(Object.assign({},Ws),n);this.restUrl=`${i}/rest/v1`,this.realtimeUrl=`${i}/realtime/v1`.replace("http","ws"),this.authUrl=`${i}/auth/v1`,this.storageUrl=`${i}/storage/v1`,this.schema=s.schema,this.multiTab=s.multiTab,this.fetch=s.fetch,this.headers=Object.assign(Object.assign({},Ye),n==null?void 0:n.headers),this.shouldThrowOnError=s.shouldThrowOnError||!1,this.auth=this._initSupabaseAuthClient(s),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},s.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get storage(){return new qe(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){let t=`${this.restUrl}/${e}`;return new gt(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch,shouldThrowOnError:this.shouldThrowOnError})}rpc(e,t,{head:n=!1,count:i=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:n,count:i})}removeAllSubscriptions(){return _t(this,void 0,void 0,function*(){let e=this.getSubscriptions().slice(),t=e.map(i=>this.removeSubscription(i));return(yield Promise.all(t)).map(({error:i},s)=>({data:{subscription:e[s]},error:i}))})}removeSubscription(e){return _t(this,void 0,void 0,function*(){let{error:t}=yield this._closeSubscription(e),n=this.getSubscriptions(),i=n.filter(s=>s.isJoined()).length;return n.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:i},error:t}})}_closeSubscription(e){return _t(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){let{error:n}=yield this._unsubscribeSubscription(e);t=n}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",n=>t({error:n})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:i,headers:s,fetch:o}){let a={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ze({url:this.authUrl,headers:Object.assign(Object.assign({},s),a),autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:i,fetch:o})}_initRealtimeClient(e){return new be(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new de(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch,throwOnError:this.shouldThrowOnError})}_getAuthHeaders(){var e,t;let n=this.headers,i=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return n.apikey=this.supabaseKey,n.Authorization=n.Authorization||`Bearer ${i}`,n}_listenForMultiTabEvents(){if(!this.multiTab||!Yt()||!(window==null?void 0:window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,n,i;if(e.key===Vt){let s=JSON.parse(String(e.newValue)),o=(n=(t=s==null?void 0:s.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0,a=(i=this.auth.session())===null||i===void 0?void 0:i.access_token;o?!a&&o?this._handleTokenChanged("SIGNED_IN",o,"STORAGE"):a!==o&&this._handleTokenChanged("TOKEN_REFRESHED",o,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",o,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,n==null?void 0:n.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),n=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut())}};var En=(r,e,t)=>new ze(r,e,t);var We,Ks=new Uint8Array(16);function xt(){if(!We&&(We=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!We))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return We(Ks)}var jn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vs(r){return typeof r=="string"&&jn.test(r)}var On=Vs;var x=[];for(Ke=0;Ke<256;++Ke)x.push((Ke+256).toString(16).substr(1));var Ke;function Xs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(x[r[e+0]]+x[r[e+1]]+x[r[e+2]]+x[r[e+3]]+"-"+x[r[e+4]]+x[r[e+5]]+"-"+x[r[e+6]]+x[r[e+7]]+"-"+x[r[e+8]]+x[r[e+9]]+"-"+x[r[e+10]]+x[r[e+11]]+x[r[e+12]]+x[r[e+13]]+x[r[e+14]]+x[r[e+15]]).toLowerCase();if(!On(t))throw TypeError("Stringified UUID is invalid");return t}var kn=Xs;function Ys(r,e,t){r=r||{};var n=r.random||(r.rng||xt)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return kn(n)}var St=Ys;var Rn=[An.default,Cn.default,$n.default,Pn.default],Qs=En("https://dihrbzcrqzorpnqtimae.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpaHJiemNycXpvcnBucXRpbWFlIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDgwNDMwMjYsImV4cCI6MTk2MzYxOTAyNn0.fM_sQdJdrQKbJzvZMDIjZ6UdU3i_AMSAucSHsxRNaL4"),Zs={uploadBlog:{interactionType:"input",eventType:"input",name:"blog",elementId:"uploadBlog",fn:function(e){let t=e.target.files[0],n=`${St()}_${t.name}`;console.log(t),Qs.storage.from("blogs").upload(`/${n}`,t).then(i=>{console.log(i)})}}};Rn.push(Zs);function eo(r){let e=[];for(let t of r){let n=Object.values(t);n&&n.length>0&&(e=[...e,...n])}return e}function to(r){r.forEach(e=>{let t="."+e.elementId;document.querySelector(t).addEventListener(e.eventType,e.fn)})}function ro(r=[]){let e=eo(r);to(e)}onload=ro(Rn);})();
//# sourceMappingURL=addContent.js.map
